@model List<EduAdmissionSite.Models.Article>
@using EduAdmissionSite.Models

@{
    ViewData["Title"] = "HÌNH ẢNH";
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HÌNH ẢNH</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        :root {
            --primary-color: rgb(46, 58, 135);
            --secondary-color: #EC6C41;
        }

        .breadcrumb-section { background-color: #e3f2fd; padding: 1rem 0; }
        .breadcrumb { background-color: transparent; padding: 0; margin-bottom: 0; }
        .breadcrumb a { color: var(--primary-color); text-decoration: none; font-weight: 500; }
        .breadcrumb .active { color: var(--primary-color); font-weight: 600; }

        .image-page-section { padding: 20px 0; }
        .image-page-header { margin-bottom: 30px; }
        .image-page-title { font-size: 24px; font-weight: bold; color: #333; display: flex; align-items: center; gap: 10px; }
        .image-page-title-icon { 
            display: inline-flex; 
            align-items: center; 
            justify-content: center; 
            width: 36px; 
            height: 36px; 
            border-radius: 50%; 
            background: var(--primary-color); 
            color: #fff; 
            font-size: 18px; 
        }

        .image-page-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 40px; }
        @@media (max-width: 1200px) { .image-page-grid { grid-template-columns: repeat(3, 1fr); } }
        @@media (max-width: 768px)  { .image-page-grid { grid-template-columns: repeat(2, 1fr); gap: 15px; } }
        @@media (max-width: 480px)  { .image-page-grid { grid-template-columns: 1fr; } }

        .image-page-card { background: white; border-radius: 8px; overflow: hidden; transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .image-page-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }

        .image-page-image-container { position: relative; width: 100%; height: 200px; overflow: hidden; }
        .image-page-thumbnail { width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s ease; }
        .image-page-card:hover .image-page-thumbnail { transform: scale(1.05); }

        .image-page-hover-overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s ease; }
        .image-page-card:hover .image-page-hover-overlay { opacity: 1; }

        .image-page-view-button { background: var(--secondary-color); color: white; padding: 10px 20px; border-radius: 25px; text-decoration: none; display: flex; align-items: center; gap: 8px; font-weight: 500; transition: transform 0.2s ease; }
        .image-page-view-button:hover { transform: scale(1.05); color: white; text-decoration: none; }
        .image-page-chevron-icon { color: white; width: 16px; height: 16px; }

        .image-page-article-title { padding: 15px; font-size: 14px; line-height: 1.4; color: #333; margin: 0; font-weight: 500; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }

        /* Pagination styles aligned with News Index */
        .pagination { justify-content: center; margin-top: 2rem; }
        .page-link { color: white; background-color: var(--primary-color); border: 1px solid var(--primary-color); border-radius: 0; padding: 0.5rem 0.75rem; margin: 0 2px; min-width: 40px; text-align: center; }
        .page-item.active .page-link { background-color: var(--primary-color); border-color: var(--primary-color); color: white; }
        .page-link:hover { background-color: var(--secondary-color); border-color: var(--secondary-color); color: white; }
        .page-item.disabled .page-link { background-color: #ccc; border-color: #ccc; color: #666; }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <div class="container-fluid breadcrumb-section">
        <div class="container">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">TRANG CHỦ</a></li>
                    <li class="breadcrumb-item active" aria-current="page">HÌNH ẢNH</li>
                </ol>
            </nav>
        </div>
    </div>

    <div class="container image-page-section">
        <div class="row">
            <!-- Main -->
            <div class="col-lg-8">
                <div class="image-page-header">
                    <h2 class="image-page-title"><span class="image-page-title-icon"><i class="bi bi-camera-fill"></i></span>HÌNH ẢNH</h2>
                </div>

                <div class="image-page-grid">
                    @foreach (var article in Model.Where(a => (a.Category & ArticleCategory.HinhAnh) != 0))
                    {
                        <div class="image-page-card">
                            <div class="image-page-image-container">
                                <img src="@article.ThumbnailUrl" alt="@article.Title" class="image-page-thumbnail" />
                                <div class="image-page-hover-overlay">
                                    <a href="#" class="image-page-view-button" onclick="openImageModal('@article.ThumbnailUrl'); return false;">
                                        <span>Xem ảnh</span>
                                        <svg class="image-page-chevron-icon" width="16" height="16" viewBox="0 0 24 24" fill="none">
                                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                            <h3 class="image-page-article-title">@article.Title</h3>
                        </div>
                    }
                </div>

                <!-- Pagination (Bootstrap style like News Index) -->
                <nav aria-label="Page navigation">
                    <ul class="pagination">
                        @if ((int)(ViewBag.CurrentPage ?? 1) > 1)
                        {
                            <li class="page-item">
                                <a class="page-link" href="?page=@(ViewBag.CurrentPage - 1)" aria-label="Previous">
                                    <i class="bi bi-chevron-double-left"></i>
                                </a>
                            </li>
                        }
                        else
                        {
                            <li class="page-item disabled">
                                <span class="page-link" aria-label="Previous">
                                    <i class="bi bi-chevron-double-left"></i>
                                </span>
                            </li>
                        }

                        @for (int i = Math.Max(1, (int)(ViewBag.CurrentPage ?? 1) - 2); i <= Math.Min((int)(ViewBag.TotalPages ?? 1), (int)(ViewBag.CurrentPage ?? 1) + 2); i++)
                        {
                            <li class="page-item @(i == (int)(ViewBag.CurrentPage ?? 1) ? "active" : "")">
                                <a class="page-link" href="?page=@i">@i</a>
                            </li>
                        }

                        @if ((int)(ViewBag.CurrentPage ?? 1) < (int)(ViewBag.TotalPages ?? 1))
                        {
                            <li class="page-item">
                                <a class="page-link" href="?page=@(ViewBag.CurrentPage + 1)" aria-label="Next">
                                    <i class="bi bi-chevron-double-right"></i>
                                </a>
                            </li>
                        }
                        else
                        {
                            <li class="page-item disabled">
                                <span class="page-link" aria-label="Next">
                                    <i class="bi bi-chevron-double-right"></i>
                                </span>
                            </li>
                        }
                    </ul>
                </nav>
            </div>

            <!-- Sidebar -->
            <div class="col-lg-4 sidebar-content">
                <div class="admission-menu">
                    <partial name="_AdmissionMenu" />
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function openImageModal(src) {
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                inset: 0;
                background: rgba(0,0,0,0.85);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
                cursor: zoom-out;
            `;

            const img = document.createElement('img');
            img.src = src;
            img.alt = '';
            img.style.cssText = `
                max-width: 95vw;
                max-height: 90vh;
                border-radius: 8px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.4);
                cursor: default;
            `;

            overlay.appendChild(img);
            document.body.appendChild(overlay);

            function close() {
                if (overlay && overlay.parentNode) overlay.parentNode.removeChild(overlay);
                document.removeEventListener('keydown', onKey);
            }

            overlay.addEventListener('click', function(e) {
                if (e.target === overlay) close();
            });

            function onKey(e) { if (e.key === 'Escape') close(); }
            document.addEventListener('keydown', onKey);
        }
    </script>
</body>
</html>


